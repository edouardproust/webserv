# Basic configuration + various tests
server {
    listen 8080;
    root /var/www/html;
    index index.html index.htm;
    client_max_body_size 1M;

    error_page 404 /error/404.html;
    error_page 500 502 503 504 /error/50x.html;

    # Root location - test index + autoindex
    location / {
        # Test: inheritance of server values
        # Should serve index.html if exists
    }

    # Location with autoindex
    location /files/ {
        root /var/www;
        autoindex on;
        # Test: directory listing when no index file
    }

    # Location with limited methods
    location /upload {
        limit_except GET POST;
        client_max_body_size 10M;
        # Test: POST allowed, DELETE -> 405
    }

    # Location with redirection
    location /old-page {
        return 301 /new-page;
    }

    location /new-page {
        return 200 "Redirection successful!\n";
    }

    # Location with DELETE method only
    location /delete-item {
        limit_except DELETE;
        return 200 "DELETE method working\n";
    }

    # Location for error tests
    location /error-test {
        # Test: access here without special config
    }

    # Location with very limited body size
    location /tiny-upload {
        client_max_body_size 100;
        # Test: upload 150 bytes -> 413 Error
    }

    # CGI Location (if implemented)
    location /cgi-bin/ {
    	cgi .py /usr/bin/python3;
        limit_except GET POST;
        # Test: CGI script execution
    }

	    # Multi CGI extensions
    location /cgi-bin2/ {
    	cgi .py /usr/bin/python2;
    	cgi .php /usr/bin/php-cgi;
        limit_except GET POST;
        # Test: CGI scripts execution
    }
}

# Virtual hosts + conflicts test
server {
    listen 80;
    root /var/www/;
    index home.html;

    # Test: same port, different server_name
    location / {
        return 200 "Welcome to example.com\n";
    }
}

# Different port
server {
    listen 8081;
    root /etc/;
    index alt.html;

    # Location with different index files
    location / {
        index home.php home.html;
    }

    # Test external redirection
    location /google {
        return 302 https://www.google.com;
    }

    # Location with all methods
    location /all-methods {
        limit_except GET POST DELETE;
        # Test: all 3 methods should work
    }
}

# Advanced tests

server {
    listen 8082;
    root /var/www/;

    # Location without index -> test default value
    location /no-index {
        # Should look for index.html/index.htm by default
    }

    # Location with complex path
    location /api/v1/users {
        limit_except GET POST;
        return 200 "API v1 users endpoint\n";
    }

    # Test path with regex-like pattern
    location /images/ {
        root /var/www/;
        # Test: serve files from /var/www/static/images/
    }

    # Location with simulated 403 error
    location /forbidden {
        return 403 "Access Forbidden\n";
    }
}